#!/bin/sh

if [ "$1" = "-T" ] && [ $2 ]; then
  if which $2 > /dev/null 2>&1; then
    term=$2
    shift 2
    { { $term $* & } && exit; } || { echo "Warning: $1 not found">/dev/stderr; };
  fi
fi

for term in kitty alacritty st urxvtc urxvt xfce4-terminal gnome-terminal xterm; do
  if [ $term = urxvtc ]; then
    which urxvtc > /dev/null 2>&1 && pgrep -u $LOGNAME -x urxvtd && { urxvtc $* & } && exit
  else
    which $term > /dev/null 2>&1 && { $term $* & } && exit
  fi
done

echo "Error: Cannot determine terminal" && exit 1
