#!/bin/bash

if [[ $(hostname -s) =~ ^(styx)$ ]]; then
  device_string="GXTP7386:00 27C6:0111"
elif [[ $(hostname -s) =~ ^(neptune)$ ]]; then
  device_string="Wacom HID 48EB Finger"
else
  echo "Error: $(basename $0) is not configured for $(hostname -s)"
  exit 1
fi

if ! which lisgd &> /dev/null; then
  echo "Error: lisgd not installed"
  exit 1
fi

if ! python -c 'import pyudev' &> /dev/null; then
  echo "Error: pyudev not installed"
  exit 1
fi

device=$(libinput list-kernel-devices | awk -F: "/[[:space:]]+${device_string}$/{print \$1}")

[[ ! $device ]] && echo "Error: Cannot determine input device for $device_string"

lisgd -d $device \
  -g "3,LR,*,*,R,$HOME/bin/wm-swipe LEFT" \
  -g "3,RL,*,*,R,$HOME/bin/wm-swipe RIGHT" \
  -g "3,UD,*,*,R,$HOME/bin/wm-swipe UP" \
  -g "3,DU,*,*,R,$HOME/bin/wm-swipe DOWN" \
  -g "3,ULDR,*,*,R,$HOME/bin/wm-swipe ULDR" \
  -g "3,URDL,*,*,R,$HOME/bin/wm-swipe URDL"

