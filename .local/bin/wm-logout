#!/bin/bash

$HOME/.local/bin/wm-closeapps
case $XDG_CURRENT_DESKTOP in
  hyprland|Hyprland) hyprctl dispatch exit ;;
  i3*) i3-msg exit ;;
  niri*) niri msg action quit ;;
  sway*) swaymsg exit ;;
  KDE)
    if which qdbus6 &> /dev/null; then
      qdbus6 org.kde.Shutdown /Shutdown org.kde.Shutdown.logout
    elif which qdbus &> /dev/null; then
      qdbus org.kde.ksmserver /KSMServer logout 0 0 1
    else
      loginctl terminate-session
    fi
    ;;
  *)
    loginctl terminate-session
    ;;
esac

